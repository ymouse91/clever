<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0d6efd" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-title" content="Clever (PWA)" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="apple-touch-icon" href="icons/gsc-512.png" />
  <link rel="manifest" href="manifest.webmanifest" />
  <title>Clever (PWA) – Solo</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="title">Clever (PWA) – Solo</div>
    <div class="hud">
      <span id="round">Kierros: 1 / 6</span>
      <span id="pick">Valinnat: 0 / 3</span>
      <span id="rerolls">Uusinnat ↻: 2</span>
      <span id="plusones">+1: 2</span>
    </div>
    <div class="actions">
      <button id="btn-new" class="btn primary">Uusi peli</button>
      <button id="btn-help" class="btn">Ohjeet</button>
    </div>
  </header>

  <main>
    <!-- ===================== NOPAT ===================== -->
    <section class="dice-section" aria-labelledby="dice-title">
          <!-- <h2 id="dice-title">Nopat</h2>-->

      <!-- Heitetyt | Hopealautanen vierekkäin -->
      <div class="dice-lane">
        <div class="dice-col">
          <h3>Heitetyt nopat</h3>
          <div class="dice-row" id="dice-available" aria-live="polite"></div>
        </div>
        <div class="dice-col">
          <h3>Hopealautanen</h3>
          <div class="dice-row" id="dice-silver"></div>
        </div>
      </div>

      <!-- Nappirivi -->
      <div class="dice-ctrls">
        <button id="btn-roll" class="btn primary">Heitä nopat</button>
        <button id="btn-reroll" class="btn" title="Käytä 1 uusinta">Uusinta ↻ </button>
        <button id="btn-plusone" class="btn" title="Käytä +1 hopealautaselta">+1 (hopealautanen)</button>
        <button id="btn-endpick" class="btn">Lopeta valinnat</button>
		<button id="btn-passive-skip" class="btn" style="display:none">Ohita passiivivuoro</button>
      </div>

      <p id="status" class="status" aria-live="polite"></p>
    </section>

    <!-- ===================== PISTETAULUKKO ===================== -->
    <section class="sheet" aria-labelledby="sheet-title">
          <!-- <h2 id="sheet-title">Pistetaulukko</h2>-->

      <div class="sheet-grid">
        <!-- VASEN PINO: Keltainen + Sininen -->
        <div class="left-stack">
          <!-- Keltainen -->
          <div class="panel yellow" aria-labelledby="panel-yellow-title">
            <div id="panel-yellow-title" class="panel-title">Keltainen</div>
            <div class="grid" id="yellow-grid"
                 role="grid" aria-label="Keltainen ruudukko 4×4"></div>
            <div class="panel-note">Rivi/sarake täyteen → pisteitä</div>
          </div>

          <!-- Sininen -->
          <div class="panel blue" aria-labelledby="panel-blue-title">
            <div id="panel-blue-title" class="panel-title">Sininen + Valkoinen</div>
            <div class="track" id="blue-track"
                 role="grid" aria-label="Sininen: merkitse B+W-summa"></div>
            <div class="panel-note">Merkitse summa, kukin numero vain kerran</div>
          </div>
        </div>

        <!-- OIKEA PINO: Vihreä + Oranssi + Violetti -->
        <div class="right-stack">
          <!-- Vihreä -->
          <div class="panel green" aria-labelledby="panel-green-title">
            <div id="panel-green-title" class="panel-title">Vihreä (≥ kynnys)</div>
            <div class="row" id="green-row"
                 role="grid" aria-label="Vihreä: arvo ≥ kynnys"></div>
            <div class="panel-note">Seuraava merkintä vain jos G ≥ kynnys</div>
          </div>

          <!-- Oranssi -->
          <div class="panel orange" aria-labelledby="panel-orange-title">
            <div id="panel-orange-title" class="panel-title">Oranssi (vapaat pisteet)</div>
            <div class="row" id="orange-row"
                 role="grid" aria-label="Oranssi: kirjoita arvo; tähdellä x2"></div>
            <div class="panel-note">Kirjoita O-arvo; tähdellä x2</div>
          </div>

          <!-- Violetti -->
          <div class="panel purple" aria-labelledby="panel-purple-title">
            <div id="panel-purple-title" class="panel-title">Violetti (kasvava; 6 reset)</div>
            <div class="row" id="purple-row"
                 role="grid" aria-label="Violetti: jokainen > edellinen; 6 reset"></div>
            <div class="panel-note">Jokainen > edellinen; 6 sallii vapaan</div>
          </div>
        </div>
      </div>

      <div class="sheet-footer">
        <button id="btn-score" class="btn">Laske pisteet</button>
        <div id="score-out" aria-live="polite"></div>
      </div>
    </section>
  </main>

  <!-- ===================== Modaalit ===================== -->
  <dialog id="help" aria-labelledby="help-title">
    <h3 id="help-title">Miten pelataan (MVP v0.2)</h3>
    <ol>
      <li>Heitä nopat. Valitse yksi noppa ja tee värialueen mukainen merkintä.</li>
      <li>Kaikki <b>valittua arvoa pienemmät</b> nopat siirtyvät hopealautaselle.</li>
      <li>Heitä jäljellä olevat ja valitse yhteensä 3 noppaa / kierros.</li>
      <li>+1: voit käyttää hopealautasen nopan lisämerkintään.</li>
      <li>6 kierrosta → Laske pisteet.</li>
    </ol>
    <p><small>Tämä on fanimainen sovitus – ei alkuperäisen taulukon kopio.</small></p>
    <div class="right">
      <button class="btn primary" onclick="document.getElementById('help').close()">OK</button>
    </div>
  </dialog>

  <dialog id="white-choose" aria-labelledby="white-choose-title">
    <h3 id="white-choose-title">Valkoinen jokeri – valitse kohdealue</h3>
    <div class="white-choices">
      <button data-area="yellow" class="btn">Keltainen</button>
      <button data-area="blue" class="btn">Sininen</button>
      <button data-area="green" class="btn">Vihreä</button>
      <button data-area="orange" class="btn">Oranssi</button>
      <button data-area="purple" class="btn">Violetti</button>
    </div>
    <div class="right">
      <button class="btn" onclick="document.getElementById('white-choose').close()">Peru</button>
    </div>
  </dialog>

  <!-- ===================== Script ===================== -->
  <script src="app.js"></script>
</body>
</html>
